<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace=".dao.MapDao">

    <resultMap type=".entity.Map" id="MapMap">
        <result property="userName" column="user_name" jdbcType="VARCHAR"/>
        <result property="danmu" column="danmu" jdbcType="VARCHAR"/>
        <result property="map" column="map" jdbcType="VARCHAR"/>
        <result property="createTimeText" column="create_time_text" jdbcType="VARCHAR"/>
        <result property="name" column="name" jdbcType="VARCHAR"/>
        <result property="description" column="description" jdbcType="VARCHAR"/>
        <result property="uploadedPretty" column="uploaded_pretty" jdbcType="VARCHAR"/>
        <result property="uploaded" column="uploaded" jdbcType="INTEGER"/>
        <result property="dataid" column="dataId" jdbcType="INTEGER"/>
        <result property="courseid" column="courseId" jdbcType="VARCHAR"/>
        <result property="gameStyleName" column="game_style_name" jdbcType="VARCHAR"/>
        <result property="gameStyle" column="game_style" jdbcType="INTEGER"/>
        <result property="themeName" column="theme_name" jdbcType="VARCHAR"/>
        <result property="theme" column="theme" jdbcType="INTEGER"/>
        <result property="difficultyName" column="difficulty_name" jdbcType="VARCHAR"/>
        <result property="difficulty" column="difficulty" jdbcType="INTEGER"/>
        <result property="tags+name" column="tags+name" jdbcType="VARCHAR"/>
        <result property="tags" column="tags" jdbcType="VARCHAR"/>
        <result property="worldRecordPretty" column="world_record_pretty" jdbcType="VARCHAR"/>
        <result property="worldRecord" column="world_record" jdbcType="INTEGER"/>
        <result property="uploadTimePretty" column="upload_time_pretty" jdbcType="VARCHAR"/>
        <result property="uploadTime" column="upload_time" jdbcType="INTEGER"/>
        <result property="numComments" column="num_comments" jdbcType="INTEGER"/>
        <result property="clearConditionText" column="clear_condition_text" jdbcType="VARCHAR"/>
        <result property="clearConditionName" column="clear_condition_name" jdbcType="VARCHAR"/>
        <result property="clearConditionMagnitude" column="clear_condition_magnitude" jdbcType="INTEGER"/>
        <result property="clears" column="clears" jdbcType="INTEGER"/>
        <result property="attempts" column="attempts" jdbcType="INTEGER"/>
        <result property="versusMatches" column="versus_matches" jdbcType="INTEGER"/>
        <result property="plays" column="plays" jdbcType="INTEGER"/>
        <result property="clearRate" column="clear_rate" jdbcType="VARCHAR"/>
        <result property="coopMatches" column="coop_matches" jdbcType="INTEGER"/>
        <result property="likes" column="likes" jdbcType="INTEGER"/>
        <result property="boos" column="boos" jdbcType="INTEGER"/>
        <result property="uniquePlayersAndVersus" column="unique_players_and_versus" jdbcType="INTEGER"/>
        <result property="weeklyLikes" column="weekly_likes" jdbcType="INTEGER"/>
        <result property="weeklyPlays" column="weekly_plays" jdbcType="INTEGER"/>
        <result property="status" column="status" jdbcType="VARCHAR"/>
        <result property="isMap" column="is_map" jdbcType="INTEGER"/>
    </resultMap>

    <!--查询单个-->
    <select id="queryById" resultMap="MapMap">
        select
          user_name, danmu, map, create_timestamp, name, description, uploaded_pretty, uploaded, dataId, courseId, game_style_name, game_style, theme_name, theme, difficulty_name, difficulty, tags+name, tags, world_record_pretty, world_record, upload_time_pretty, upload_time, num_comments, clear_condition_text, clear_condition_name, clear_condition_magnitude, clears, attempts, versus_matches, plays, clear_rate, coop_matches, likes, boos, unique_players_and_versus, weekly_likes, weekly_plays, status, is_map
        from map
        where map = #{map}
    </select>

    <!--查询指定行数据-->
    <select id="queryAllByLimit" resultMap="MapMap">
        select
          user_name, danmu, map, create_timestamp, name, description, uploaded_pretty, uploaded, dataId, courseId, game_style_name, game_style, theme_name, theme, difficulty_name, difficulty, tags+name, tags, world_record_pretty, world_record, upload_time_pretty, upload_time, num_comments, clear_condition_text, clear_condition_name, clear_condition_magnitude, clears, attempts, versus_matches, plays, clear_rate, coop_matches, likes, boos, unique_players_and_versus, weekly_likes, weekly_plays, status, is_map
        from map
        <where>
            <if test="userName != null and userName != ''">
                and user_name = #{userName}
            </if>
            <if test="danmu != null and danmu != ''">
                and danmu = #{danmu}
            </if>
            <if test="map != null and map != ''">
                and map = #{map}
            </if>
            <if test="createTimeText != null and createTimeText != ''">
                and create_time_text = #{createTimeText}
            </if>
            <if test="name != null and name != ''">
                and name = #{name}
            </if>
            <if test="description != null and description != ''">
                and description = #{description}
            </if>
            <if test="uploadedPretty != null and uploadedPretty != ''">
                and uploaded_pretty = #{uploadedPretty}
            </if>
            <if test="uploaded != null">
                and uploaded = #{uploaded}
            </if>
            <if test="dataid != null">
                and dataId = #{dataid}
            </if>
            <if test="courseid != null and courseid != ''">
                and courseId = #{courseid}
            </if>
            <if test="gameStyleName != null and gameStyleName != ''">
                and game_style_name = #{gameStyleName}
            </if>
            <if test="gameStyle != null">
                and game_style = #{gameStyle}
            </if>
            <if test="themeName != null and themeName != ''">
                and theme_name = #{themeName}
            </if>
            <if test="theme != null">
                and theme = #{theme}
            </if>
            <if test="difficultyName != null and difficultyName != ''">
                and difficulty_name = #{difficultyName}
            </if>
            <if test="difficulty != null">
                and difficulty = #{difficulty}
            </if>
            <if test="tags+name != null and tags+name != ''">
                and tags+name = #{tags+name}
            </if>
            <if test="tags != null and tags != ''">
                and tags = #{tags}
            </if>
            <if test="worldRecordPretty != null and worldRecordPretty != ''">
                and world_record_pretty = #{worldRecordPretty}
            </if>
            <if test="worldRecord != null">
                and world_record = #{worldRecord}
            </if>
            <if test="uploadTimePretty != null and uploadTimePretty != ''">
                and upload_time_pretty = #{uploadTimePretty}
            </if>
            <if test="uploadTime != null">
                and upload_time = #{uploadTime}
            </if>
            <if test="numComments != null">
                and num_comments = #{numComments}
            </if>
            <if test="clearConditionText != null and clearConditionText != ''">
                and clear_condition_text = #{clearConditionText}
            </if>
            <if test="clearConditionName != null and clearConditionName != ''">
                and clear_condition_name = #{clearConditionName}
            </if>
            <if test="clearConditionMagnitude != null">
                and clear_condition_magnitude = #{clearConditionMagnitude}
            </if>
            <if test="clears != null">
                and clears = #{clears}
            </if>
            <if test="attempts != null">
                and attempts = #{attempts}
            </if>
            <if test="versusMatches != null">
                and versus_matches = #{versusMatches}
            </if>
            <if test="plays != null">
                and plays = #{plays}
            </if>
            <if test="clearRate != null and clearRate != ''">
                and clear_rate = #{clearRate}
            </if>
            <if test="coopMatches != null">
                and coop_matches = #{coopMatches}
            </if>
            <if test="likes != null">
                and likes = #{likes}
            </if>
            <if test="boos != null">
                and boos = #{boos}
            </if>
            <if test="uniquePlayersAndVersus != null">
                and unique_players_and_versus = #{uniquePlayersAndVersus}
            </if>
            <if test="weeklyLikes != null">
                and weekly_likes = #{weeklyLikes}
            </if>
            <if test="weeklyPlays != null">
                and weekly_plays = #{weeklyPlays}
            </if>
            <if test="status != null and status != ''">
                and status = #{status}
            </if>
            <if test="isMap != null">
                and is_map = #{isMap}
            </if>
        </where>
        limit #{pageable.offset}, #{pageable.pageSize}
    </select>

    <!--统计总行数-->
    <select id="count" resultType="java.lang.Long">
        select count(1)
        from map
        <where>
            <if test="userName != null and userName != ''">
                and user_name = #{userName}
            </if>
            <if test="danmu != null and danmu != ''">
                and danmu = #{danmu}
            </if>
            <if test="map != null and map != ''">
                and map = #{map}
            </if>
            <if test="createTimeText != null and createTimeText != ''">
                and create_time_text = #{createTimeText}
            </if>
            <if test="name != null and name != ''">
                and name = #{name}
            </if>
            <if test="description != null and description != ''">
                and description = #{description}
            </if>
            <if test="uploadedPretty != null and uploadedPretty != ''">
                and uploaded_pretty = #{uploadedPretty}
            </if>
            <if test="uploaded != null">
                and uploaded = #{uploaded}
            </if>
            <if test="dataid != null">
                and dataId = #{dataid}
            </if>
            <if test="courseid != null and courseid != ''">
                and courseId = #{courseid}
            </if>
            <if test="gameStyleName != null and gameStyleName != ''">
                and game_style_name = #{gameStyleName}
            </if>
            <if test="gameStyle != null">
                and game_style = #{gameStyle}
            </if>
            <if test="themeName != null and themeName != ''">
                and theme_name = #{themeName}
            </if>
            <if test="theme != null">
                and theme = #{theme}
            </if>
            <if test="difficultyName != null and difficultyName != ''">
                and difficulty_name = #{difficultyName}
            </if>
            <if test="difficulty != null">
                and difficulty = #{difficulty}
            </if>
            <if test="tags+name != null and tags+name != ''">
                and tags+name = #{tags+name}
            </if>
            <if test="tags != null and tags != ''">
                and tags = #{tags}
            </if>
            <if test="worldRecordPretty != null and worldRecordPretty != ''">
                and world_record_pretty = #{worldRecordPretty}
            </if>
            <if test="worldRecord != null">
                and world_record = #{worldRecord}
            </if>
            <if test="uploadTimePretty != null and uploadTimePretty != ''">
                and upload_time_pretty = #{uploadTimePretty}
            </if>
            <if test="uploadTime != null">
                and upload_time = #{uploadTime}
            </if>
            <if test="numComments != null">
                and num_comments = #{numComments}
            </if>
            <if test="clearConditionText != null and clearConditionText != ''">
                and clear_condition_text = #{clearConditionText}
            </if>
            <if test="clearConditionName != null and clearConditionName != ''">
                and clear_condition_name = #{clearConditionName}
            </if>
            <if test="clearConditionMagnitude != null">
                and clear_condition_magnitude = #{clearConditionMagnitude}
            </if>
            <if test="clears != null">
                and clears = #{clears}
            </if>
            <if test="attempts != null">
                and attempts = #{attempts}
            </if>
            <if test="versusMatches != null">
                and versus_matches = #{versusMatches}
            </if>
            <if test="plays != null">
                and plays = #{plays}
            </if>
            <if test="clearRate != null and clearRate != ''">
                and clear_rate = #{clearRate}
            </if>
            <if test="coopMatches != null">
                and coop_matches = #{coopMatches}
            </if>
            <if test="likes != null">
                and likes = #{likes}
            </if>
            <if test="boos != null">
                and boos = #{boos}
            </if>
            <if test="uniquePlayersAndVersus != null">
                and unique_players_and_versus = #{uniquePlayersAndVersus}
            </if>
            <if test="weeklyLikes != null">
                and weekly_likes = #{weeklyLikes}
            </if>
            <if test="weeklyPlays != null">
                and weekly_plays = #{weeklyPlays}
            </if>
            <if test="status != null and status != ''">
                and status = #{status}
            </if>
            <if test="isMap != null">
                and is_map = #{isMap}
            </if>
        </where>
    </select>

    <!--新增所有列-->
    <insert id="insert" keyProperty="map" useGeneratedKeys="true">
        insert into map(user_name, danmu, create_timestamp, name, description, uploaded_pretty, uploaded, dataId, courseId, game_style_name, game_style, theme_name, theme, difficulty_name, difficulty, tags+name, tags, world_record_pretty, world_record, upload_time_pretty, upload_time, num_comments, clear_condition_text, clear_condition_name, clear_condition_magnitude, clears, attempts, versus_matches, plays, clear_rate, coop_matches, likes, boos, unique_players_and_versus, weekly_likes, weekly_plays, status, is_map)
        values (#{userName}, #{danmu}, #{createTimeText}, #{name}, #{description}, #{uploadedPretty}, #{uploaded}, #{dataid}, #{courseid}, #{gameStyleName}, #{gameStyle}, #{themeName}, #{theme}, #{difficultyName}, #{difficulty}, #{tags+name}, #{tags}, #{worldRecordPretty}, #{worldRecord}, #{uploadTimePretty}, #{uploadTime}, #{numComments}, #{clearConditionText}, #{clearConditionName}, #{clearConditionMagnitude}, #{clears}, #{attempts}, #{versusMatches}, #{plays}, #{clearRate}, #{coopMatches}, #{likes}, #{boos}, #{uniquePlayersAndVersus}, #{weeklyLikes}, #{weeklyPlays}, #{status}, #{isMap})
    </insert>

    <insert id="insertBatch" keyProperty="map" useGeneratedKeys="true">
        insert into map(user_name, danmu, create_timestamp, name, description, uploaded_pretty, uploaded, dataId, courseId, game_style_name, game_style, theme_name, theme, difficulty_name, difficulty, tags+name, tags, world_record_pretty, world_record, upload_time_pretty, upload_time, num_comments, clear_condition_text, clear_condition_name, clear_condition_magnitude, clears, attempts, versus_matches, plays, clear_rate, coop_matches, likes, boos, unique_players_and_versus, weekly_likes, weekly_plays, status, is_map)
        values
        <foreach collection="entities" item="entity" separator=",">
        (#{entity.userName}, #{entity.danmu}, #{entity.createTimeText}, #{entity.name}, #{entity.description}, #{entity.uploadedPretty}, #{entity.uploaded}, #{entity.dataid}, #{entity.courseid}, #{entity.gameStyleName}, #{entity.gameStyle}, #{entity.themeName}, #{entity.theme}, #{entity.difficultyName}, #{entity.difficulty}, #{entity.tags+name}, #{entity.tags}, #{entity.worldRecordPretty}, #{entity.worldRecord}, #{entity.uploadTimePretty}, #{entity.uploadTime}, #{entity.numComments}, #{entity.clearConditionText}, #{entity.clearConditionName}, #{entity.clearConditionMagnitude}, #{entity.clears}, #{entity.attempts}, #{entity.versusMatches}, #{entity.plays}, #{entity.clearRate}, #{entity.coopMatches}, #{entity.likes}, #{entity.boos}, #{entity.uniquePlayersAndVersus}, #{entity.weeklyLikes}, #{entity.weeklyPlays}, #{entity.status}, #{entity.isMap})
        </foreach>
    </insert>

    <insert id="insertOrUpdateBatch" keyProperty="map" useGeneratedKeys="true">
        insert into map(user_name, danmu, create_timestamp, name, description, uploaded_pretty, uploaded, dataId, courseId, game_style_name, game_style, theme_name, theme, difficulty_name, difficulty, tags+name, tags, world_record_pretty, world_record, upload_time_pretty, upload_time, num_comments, clear_condition_text, clear_condition_name, clear_condition_magnitude, clears, attempts, versus_matches, plays, clear_rate, coop_matches, likes, boos, unique_players_and_versus, weekly_likes, weekly_plays, status, is_map)
        values
        <foreach collection="entities" item="entity" separator=",">
            (#{entity.userName}, #{entity.danmu}, #{entity.createTimeText}, #{entity.name}, #{entity.description}, #{entity.uploadedPretty}, #{entity.uploaded}, #{entity.dataid}, #{entity.courseid}, #{entity.gameStyleName}, #{entity.gameStyle}, #{entity.themeName}, #{entity.theme}, #{entity.difficultyName}, #{entity.difficulty}, #{entity.tags+name}, #{entity.tags}, #{entity.worldRecordPretty}, #{entity.worldRecord}, #{entity.uploadTimePretty}, #{entity.uploadTime}, #{entity.numComments}, #{entity.clearConditionText}, #{entity.clearConditionName}, #{entity.clearConditionMagnitude}, #{entity.clears}, #{entity.attempts}, #{entity.versusMatches}, #{entity.plays}, #{entity.clearRate}, #{entity.coopMatches}, #{entity.likes}, #{entity.boos}, #{entity.uniquePlayersAndVersus}, #{entity.weeklyLikes}, #{entity.weeklyPlays}, #{entity.status}, #{entity.isMap})
        </foreach>
        on duplicate key update
        user_name = values(user_name),
        danmu = values(danmu),
        create_time_text = values(create_time_text),
        name = values(name),
        description = values(description),
        uploaded_pretty = values(uploaded_pretty),
        uploaded = values(uploaded),
        dataId = values(dataId),
        courseId = values(courseId),
        game_style_name = values(game_style_name),
        game_style = values(game_style),
        theme_name = values(theme_name),
        theme = values(theme),
        difficulty_name = values(difficulty_name),
        difficulty = values(difficulty),
        tags+name = values(tags+name),
        tags = values(tags),
        world_record_pretty = values(world_record_pretty),
        world_record = values(world_record),
        upload_time_pretty = values(upload_time_pretty),
        upload_time = values(upload_time),
        num_comments = values(num_comments),
        clear_condition_text = values(clear_condition_text),
        clear_condition_name = values(clear_condition_name),
        clear_condition_magnitude = values(clear_condition_magnitude),
        clears = values(clears),
        attempts = values(attempts),
        versus_matches = values(versus_matches),
        plays = values(plays),
        clear_rate = values(clear_rate),
        coop_matches = values(coop_matches),
        likes = values(likes),
        boos = values(boos),
        unique_players_and_versus = values(unique_players_and_versus),
        weekly_likes = values(weekly_likes),
        weekly_plays = values(weekly_plays),
        status = values(status),
        is_map = values(is_map)
    </insert>

    <!--通过主键修改数据-->
    <update id="update">
        update map
        <set>
            <if test="userName != null and userName != ''">
                user_name = #{userName},
            </if>
            <if test="danmu != null and danmu != ''">
                danmu = #{danmu},
            </if>
            <if test="createTimeText != null and createTimeText != ''">
                create_time_text = #{createTimeText},
            </if>
            <if test="name != null and name != ''">
                name = #{name},
            </if>
            <if test="description != null and description != ''">
                description = #{description},
            </if>
            <if test="uploadedPretty != null and uploadedPretty != ''">
                uploaded_pretty = #{uploadedPretty},
            </if>
            <if test="uploaded != null">
                uploaded = #{uploaded},
            </if>
            <if test="dataid != null">
                dataId = #{dataid},
            </if>
            <if test="courseid != null and courseid != ''">
                courseId = #{courseid},
            </if>
            <if test="gameStyleName != null and gameStyleName != ''">
                game_style_name = #{gameStyleName},
            </if>
            <if test="gameStyle != null">
                game_style = #{gameStyle},
            </if>
            <if test="themeName != null and themeName != ''">
                theme_name = #{themeName},
            </if>
            <if test="theme != null">
                theme = #{theme},
            </if>
            <if test="difficultyName != null and difficultyName != ''">
                difficulty_name = #{difficultyName},
            </if>
            <if test="difficulty != null">
                difficulty = #{difficulty},
            </if>
            <if test="tags+name != null and tags+name != ''">
                tags+name = #{tags+name},
            </if>
            <if test="tags != null and tags != ''">
                tags = #{tags},
            </if>
            <if test="worldRecordPretty != null and worldRecordPretty != ''">
                world_record_pretty = #{worldRecordPretty},
            </if>
            <if test="worldRecord != null">
                world_record = #{worldRecord},
            </if>
            <if test="uploadTimePretty != null and uploadTimePretty != ''">
                upload_time_pretty = #{uploadTimePretty},
            </if>
            <if test="uploadTime != null">
                upload_time = #{uploadTime},
            </if>
            <if test="numComments != null">
                num_comments = #{numComments},
            </if>
            <if test="clearConditionText != null and clearConditionText != ''">
                clear_condition_text = #{clearConditionText},
            </if>
            <if test="clearConditionName != null and clearConditionName != ''">
                clear_condition_name = #{clearConditionName},
            </if>
            <if test="clearConditionMagnitude != null">
                clear_condition_magnitude = #{clearConditionMagnitude},
            </if>
            <if test="clears != null">
                clears = #{clears},
            </if>
            <if test="attempts != null">
                attempts = #{attempts},
            </if>
            <if test="versusMatches != null">
                versus_matches = #{versusMatches},
            </if>
            <if test="plays != null">
                plays = #{plays},
            </if>
            <if test="clearRate != null and clearRate != ''">
                clear_rate = #{clearRate},
            </if>
            <if test="coopMatches != null">
                coop_matches = #{coopMatches},
            </if>
            <if test="likes != null">
                likes = #{likes},
            </if>
            <if test="boos != null">
                boos = #{boos},
            </if>
            <if test="uniquePlayersAndVersus != null">
                unique_players_and_versus = #{uniquePlayersAndVersus},
            </if>
            <if test="weeklyLikes != null">
                weekly_likes = #{weeklyLikes},
            </if>
            <if test="weeklyPlays != null">
                weekly_plays = #{weeklyPlays},
            </if>
            <if test="status != null and status != ''">
                status = #{status},
            </if>
            <if test="isMap != null">
                is_map = #{isMap},
            </if>
        </set>
        where map = #{map}
    </update>

    <!--通过主键删除-->
    <delete id="deleteById">
        delete from map where map = #{map}
    </delete>

</mapper>

